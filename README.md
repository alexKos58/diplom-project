# Проект "Cloud Storage" (Diplom)

## Описание проекта

Проект представляет собой реализацию облачного хранилища файлов, где пользователи могут загружать, скачивать, удалять и
управлять файлами через REST API. Приложение защищено с использованием аутентификации на основе JWT (JSON Web Token).
Данные хранятся в базе данных PostgreSQL. Проект реализован на основе Spring Boot и включает тесты, написанные с
использованием JUnit, Mockito и Testcontainers для интеграционных тестов.

## Основные функции

- **Аутентификация и авторизация**: Использование JWT для защиты REST API.
- **Работа с файлами**:
    - Загрузка файлов
    - Удаление файлов
    - Получение списка файлов
    - Скачивание файлов
- **Хранение данных**: Использование PostgreSQL для хранения информации о пользователях и файлах.
- **Тестирование**:
    - Unit тесты с использованием JUnit и Mockito
    - Интеграционные тесты с использованием Testcontainers для работы с тестовой базой данных PostgreSQL.

## Технологии и зависимости

- **Java 21**
- **Spring Boot 3.3.2**: фреймворк для создания REST API
- **Spring Security**: для реализации аутентификации и авторизации
- **PostgreSQL**: база данных для хранения данных
- **Testcontainers**: для интеграционных тестов с тестовой базой данных PostgreSQL
- **JUnit 5**: для написания модульных и интеграционных тестов
- **Mockito**: для мокирования зависимостей в тестах
- **Lombok**: для упрощения кода (генерация геттеров, сеттеров и т.д.)
- **Maven**: система сборки и управления зависимостями

## Установка и запуск

1. Склонируйте репозиторий:
    ```bash
    git clone https://github.com/ваш-репозиторий.git
    ```
2. Перейдите в директорию проекта:
    ```bash
    cd diplom
    ```
3. Убедитесь, что у вас установлен PostgreSQL, и создайте базу данных:
    ```sql
    CREATE DATABASE cloudstorage;
    ```

4. Настройте файл `application.yml` для подключения к вашей базе данных:
    ```yaml
    spring:
      datasource:
        url: jdbc:postgresql://localhost:5432/cloudstorage
        username: ваш_пользователь
        password: ваш_пароль
        driver-class-name: org.postgresql.Driver
      jpa:
        hibernate:
          ddl-auto: update
    ```

5. Соберите и запустите приложение:
    ```bash
    mvn clean install
    mvn spring-boot:run
    ```

## Запуск тестов

Проект содержит unit и интеграционные тесты. Для запуска всех тестов используйте следующую команду:

```bash
mvn test
```

## Интеграционные тесты
Интеграционные тесты используют Testcontainers для работы с временной базой данных PostgreSQL в Docker-контейнере. Перед запуском убедитесь, что Docker установлен и запущен.

## Структура проекта
- src/main/java/ru/kostyushin/diplom/ — основной код приложения.
- src/main/resources/ — конфигурационные файлы и ресурсы.
- src/test/java/ru/kostyushin/diplom/ — модульные и интеграционные тесты.
## API Методы 
# Аутентификация
- POST /login — Вход пользователя. Возвращает JWT токен.
# Работа с файлами
- POST /file — Загрузка файла.
- GET /file/{filename} — Скачивание файла.
- DELETE /file/{filename} — Удаление файла.
- GET /files — Получение списка файлов.